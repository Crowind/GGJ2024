[gd_scene load_steps=38 format=3 uid="uid://bt7d6dj4gs6p1"]

[ext_resource type="Script" path="res://characters/enemy.gd" id="1_d8gr1"]
[ext_resource type="Texture2D" uid="uid://b7vev6ygg0jcd" path="res://gfx/assets/Characters/bullo.png" id="2_lbpv1"]
[ext_resource type="Script" path="res://characters/character_stats.gd" id="3_cc1bd"]
[ext_resource type="Texture2D" uid="uid://daqey07t1u3k7" path="res://gfx/vfx/Particles_AH.png" id="4_xduwl"]

[sub_resource type="AtlasTexture" id="AtlasTexture_ftxai"]
atlas = ExtResource("2_lbpv1")
region = Rect2(64, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_38dia"]
atlas = ExtResource("2_lbpv1")
region = Rect2(0, 128, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_2uea7"]
atlas = ExtResource("2_lbpv1")
region = Rect2(32, 128, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_6uv2m"]
atlas = ExtResource("2_lbpv1")
region = Rect2(64, 128, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_x4rq7"]
atlas = ExtResource("2_lbpv1")
region = Rect2(96, 128, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_b0py6"]
atlas = ExtResource("2_lbpv1")
region = Rect2(128, 128, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_jdh1w"]
atlas = ExtResource("2_lbpv1")
region = Rect2(0, 96, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_nghvt"]
atlas = ExtResource("2_lbpv1")
region = Rect2(32, 96, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_dv3kn"]
atlas = ExtResource("2_lbpv1")
region = Rect2(64, 96, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_gguej"]
atlas = ExtResource("2_lbpv1")
region = Rect2(0, 224, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_kjksu"]
atlas = ExtResource("2_lbpv1")
region = Rect2(32, 224, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_6hejt"]
atlas = ExtResource("2_lbpv1")
region = Rect2(64, 224, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_e4tv0"]
atlas = ExtResource("2_lbpv1")
region = Rect2(0, 192, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_4w27m"]
atlas = ExtResource("2_lbpv1")
region = Rect2(32, 192, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_wl0lq"]
atlas = ExtResource("2_lbpv1")
region = Rect2(64, 192, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_fln6n"]
atlas = ExtResource("2_lbpv1")
region = Rect2(32, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_m7pno"]
atlas = ExtResource("2_lbpv1")
region = Rect2(64, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_4g3kf"]
atlas = ExtResource("2_lbpv1")
region = Rect2(96, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_336f2"]
atlas = ExtResource("2_lbpv1")
region = Rect2(128, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_36l44"]
atlas = ExtResource("2_lbpv1")
region = Rect2(0, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_ep62h"]
atlas = ExtResource("2_lbpv1")
region = Rect2(32, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_f2jl7"]
atlas = ExtResource("2_lbpv1")
region = Rect2(64, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_822ni"]
atlas = ExtResource("2_lbpv1")
region = Rect2(288, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_8vu8s"]
atlas = ExtResource("2_lbpv1")
region = Rect2(320, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_67q1v"]
atlas = ExtResource("2_lbpv1")
region = Rect2(352, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_4g767"]
atlas = ExtResource("2_lbpv1")
region = Rect2(64, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_rqlw5"]
atlas = ExtResource("2_lbpv1")
region = Rect2(192, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_vxd0i"]
atlas = ExtResource("2_lbpv1")
region = Rect2(224, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_g6wu8"]
atlas = ExtResource("2_lbpv1")
region = Rect2(256, 0, 32, 32)

[sub_resource type="SpriteFrames" id="SpriteFrames_xm215"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_ftxai")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_38dia")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_2uea7")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_6uv2m")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_x4rq7")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_b0py6")
}],
"loop": false,
"name": &"down_on_manhole",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_jdh1w")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_nghvt")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dv3kn")
}],
"loop": true,
"name": &"idle_down",
"speed": 5.0
}, {
"frames": [],
"loop": true,
"name": &"idle_side",
"speed": 5.0
}, {
"frames": [],
"loop": true,
"name": &"idle_up",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_gguej")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_kjksu")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_6hejt")
}],
"loop": false,
"name": &"jack_in_a_box",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_e4tv0")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_4w27m")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_wl0lq")
}],
"loop": false,
"name": &"slide_on_banana",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_fln6n")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_m7pno")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_4g3kf")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_336f2")
}],
"loop": true,
"name": &"smile",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_36l44")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ep62h")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_f2jl7")
}],
"loop": true,
"name": &"walk_down",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_822ni")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_8vu8s")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_67q1v")
}],
"loop": true,
"name": &"walk_side",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_4g767")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_rqlw5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_vxd0i")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_g6wu8")
}],
"loop": true,
"name": &"walk_up",
"speed": 5.0
}]

[sub_resource type="CircleShape2D" id="CircleShape2D_2nq3s"]
radius = 4.0

[sub_resource type="CircleShape2D" id="CircleShape2D_6fo1d"]
radius = 35.1283

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_dmhi7"]
particle_flag_disable_z = true
emission_shape_offset = Vector3(0, 23.28, 0)
angle_min = -40.0
angle_max = 40.0
velocity_pivot = Vector3(0, 1, 0)
direction = Vector3(0, -15, 0)
spread = 20.0
initial_velocity_min = 50.0
initial_velocity_max = 80.0
gravity = Vector3(0, 98, 0)

[node name="Enemy" type="CharacterBody2D"]
z_index = 1
y_sort_enabled = true
collision_mask = 2
slide_on_ceiling = false
floor_stop_on_slope = false
floor_block_on_wall = false
floor_max_angle = 3.14159
floor_snap_length = 0.0
platform_on_leave = 2
script = ExtResource("1_d8gr1")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
y_sort_enabled = true
position = Vector2(0, -12)
sprite_frames = SubResource("SpriteFrames_xm215")
animation = &"slide_on_banana"

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
y_sort_enabled = true
shape = SubResource("CircleShape2D_2nq3s")

[node name="NavigationAgent2D" type="NavigationAgent2D" parent="."]
path_desired_distance = 4.0
target_desired_distance = 8.0
path_postprocessing = 1
avoidance_enabled = true
radius = 16.0
max_speed = 150.0

[node name="ChangeStateTimer" type="Timer" parent="."]

[node name="CharacterStats" type="Node" parent="."]
script = ExtResource("3_cc1bd")
type = "Normal"

[node name="LaughContagionArea2D" type="Area2D" parent="."]
metadata/_edit_lock_ = true

[node name="LaughContagionCollisionShape2D" type="CollisionShape2D" parent="LaughContagionArea2D"]
shape = SubResource("CircleShape2D_6fo1d")
debug_color = Color(1, 0.505882, 0.901961, 0.419608)
metadata/_edit_lock_ = true

[node name="NoHappinessAddTimer" type="Timer" parent="."]

[node name="LaughParticles" type="GPUParticles2D" parent="."]
z_index = 1
position = Vector2(0, -51)
sub_emitter = NodePath(".")
process_material = SubResource("ParticleProcessMaterial_dmhi7")
texture = ExtResource("4_xduwl")
lifetime = 1.5
speed_scale = 2.08
explosiveness = 0.15
randomness = 0.15
trail_lifetime = 0.2

[connection signal="navigation_finished" from="NavigationAgent2D" to="." method="_on_navigation_agent_2d_navigation_finished"]
[connection signal="path_changed" from="NavigationAgent2D" to="." method="_on_navigation_agent_2d_path_changed"]
[connection signal="target_reached" from="NavigationAgent2D" to="." method="_on_navigation_agent_2d_target_reached"]
[connection signal="velocity_computed" from="NavigationAgent2D" to="." method="_on_navigation_agent_2d_velocity_computed"]
[connection signal="timeout" from="ChangeStateTimer" to="." method="_on_timer_timeout"]
[connection signal="body_entered" from="LaughContagionArea2D" to="." method="_on_laugh_contagion_area_2d_body_entered"]
[connection signal="body_exited" from="LaughContagionArea2D" to="." method="_on_laugh_contagion_area_2d_body_exited"]
[connection signal="timeout" from="NoHappinessAddTimer" to="." method="_on_no_happiness_add_timer_timeout"]
